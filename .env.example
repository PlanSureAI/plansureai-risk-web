# ============================================================================
# SUPABASE - Database & Auth
# ============================================================================
# Get these from: https://app.supabase.com → Project Settings → API

# Public URL (safe to expose to frontend)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co

# Public Anon Key (safe to expose to frontend)
# Used by client-side code for auth & basic queries
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...

# Service Role Key (KEEP SECRET - backend only)
# Has full access to database, including bypassing RLS
SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...


# ============================================================================
# ANTHROPIC - Claude API for Risk Scoring
# ============================================================================
# Get this from: https://console.anthropic.com → API Keys

ANTHROPIC_API_KEY=sk-ant-...


# ============================================================================
# STRIPE - Payment Processing
# ============================================================================
# Get these from: https://dashboard.stripe.com → API Keys

# Public key (safe to expose to frontend)
NEXT_PUBLIC_STRIPE_PUBLIC_KEY=pk_live_...

# Secret key (KEEP SECRET - backend only)
STRIPE_SECRET_KEY=sk_live_...

# Webhook signing secret (for verifying Stripe events)
# Get from: Dashboard → Developers → Webhooks → Click endpoint → Signing secret
STRIPE_WEBHOOK_SECRET=whsec_...


# ============================================================================
# UPSTASH QSTASH - Async Job Queue
# ============================================================================
# Get these from: https://console.upstash.com → QStash

# QSTASH_TOKEN is your PUBLISH TOKEN
# This is what the upload endpoint uses to queue jobs
# DO NOT use the signing key here - common mistake!
# Location: Console → QStash → Default token
QSTASH_TOKEN=your-publish-token-here

# QSTASH_CURRENT_SIGNING_KEY is for VERIFYING webhooks
# The process route uses this to verify QStash signature
# Location: Console → QStash → Signing Keys → Current Key
QSTASH_CURRENT_SIGNING_KEY=your-signing-key-here

# Optional: Next signing key for key rotation (not required initially)
# QSTASH_NEXT_SIGNING_KEY=your-next-signing-key-here


# ============================================================================
# EMAIL SERVICE - For alerts and notifications
# ============================================================================
# Get these from: https://resend.com (recommended) or SendGrid

# Option 1: Resend (recommended for new projects)
RESEND_API_KEY=re_...

# Option 2: SendGrid (alternative)
SENDGRID_API_KEY=SG....


# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Your app's public URL (where it's hosted)
# Development: http://localhost:3000
# Production: https://your-domain.com
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Internal URL for processing documents (can be same as APP_URL)
# Used by QStash to call back to your webhook
# Must be accessible from the internet
PROCESS_DOCUMENT_URL=http://localhost:3000/api/documents/process

# Environment
NODE_ENV=development

# Optional: Error tracking with Sentry
# NEXT_PUBLIC_SENTRY_DSN=https://...@sentry.io/...


# ============================================================================
# SETUP INSTRUCTIONS
# ============================================================================
#
# 1. Create a Supabase project at https://supabase.com
#    - Go to Project Settings → API
#    - Copy URL and anon key (public) and service role key (secret)
#
# 2. Get Anthropic API key at https://console.anthropic.com
#    - Click "API Keys" → "Create new secret key"
#
# 3. Create Stripe account at https://stripe.com
#    - Go to Developers → API Keys
#    - Copy publishable and secret keys
#    - Set up webhook at https://dashboard.stripe.com/webhooks
#    - Add endpoint: https://your-domain.com/api/stripe/webhooks
#    - Copy webhook signing secret
#
# 4. Create Upstash QStash at https://upstash.com
#    - Go to QStash console
#    - Copy the "Default token" (this is QSTASH_TOKEN - it's for publishing)
#    - Copy the "Signing Keys" → "Current Key" (this is for verifying webhooks)
#    - CRITICAL: Don't mix these up! Token ≠ Signing Key
#
# 5. (Optional) Create Resend account at https://resend.com
#    - Go to API Keys
#    - Create a new key
#
# 6. Run locally:
#    npm install
#    npm run dev
#    # Visit http://localhost:3000
#
# 7. Deploy to production:
#    - Push to GitHub
#    - Connect to Vercel
#    - Add all these environment variables in Vercel dashboard
#    - Update NEXT_PUBLIC_APP_URL to your domain
#    - Update PROCESS_DOCUMENT_URL to your domain
#    - Update Stripe webhook to point to production URL
